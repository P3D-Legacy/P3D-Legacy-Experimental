version=2
:if:<register.exists(rocket_invasion_defeat)>=False
    @player.turnto(1)
    @player.move(2)
    @npc.turn(1,3)
    @battle.starttrainer(rocket\radiotower\archer)
    @text.show(How could this be?*Our dreams have~come to naught.*I wasn't up to the~task after all.*Like Giovanni did~before me, I will*disband Team~Rocket here today.*Farewell.)

    @screen.fadeout
    @npc.remove(1)
    @npc.remove(2)
    @register.remove(johto_rocket_radio_pokegear)
    @level.wait(30)
    @screen.fadein
    @music.play(town\goldenrod)
    @music.setmusicloop(town\goldenrod)
    @npc.register(johto\goldenrod\radiotower\2f.dat|5|position|2,0,1)
    @npc.register(johto\goldenrod\radiotower\3f.dat|2|position|8,0,4)
    @npc.register(johto\goldenrod\radiotower\3f.dat|3|remove|0)
    @npc.register(johto\goldenrod\radiotower\3f.dat|4|remove|0)
    @npc.register(johto\goldenrod\radiotower\3f.dat|5|remove|0)
    @npc.register(johto\goldenrod\radiotower\3f.dat|6|remove|0)
    @npc.register(johto\goldenrod\radiotower\4f.dat|0|position|7,0,4)
    @npc.register(johto\goldenrod\radiotower\4f.dat|1|remove|0)
    @npc.register(johto\goldenrod\radiotower\4f.dat|2|remove|0)
    @npc.register(johto\goldenrod\radiotower\4f.dat|3|remove|0)
    @npc.register(johto\goldenrod\radiotower\4f.dat|4|remove|0)
    @npc.register(johto\goldenrod\radiotower\5f.dat|1|remove|0)
    @npc.register(johto\goldenrod\radiotower\5f.dat|2|remove|0)
    @npc.register(johto\goldenrod\radiotower\5f.dat|3|position|14,0,5)
    @npc.register(johto\goldenrod\underground\2.dat|0|remove|0)
    @npc.register(johto\goldenrod\underground\2.dat|1|remove|0)
    @npc.register(johto\goldenrod\underground\2.dat|2|remove|0)
    @npc.register(johto\goldenrod\underground\2.dat|3|remove|0)
    @npc.register(johto\goldenrod\underground\2.dat|4|remove|0)
    @npc.register(johto\goldenrod\underground\2.dat|5|remove|0)
    @npc.register(johto\goldenrod\underground\2.dat|6|remove|0)
    @npc.register(johto\goldenrod\underground\3.dat|6|remove|0)
    @npc.register(johto\goldenrod\underground\3.dat|0|remove|0)
    @npc.register(johto\goldenrod\underground\3.dat|1|remove|0)
    @npc.register(johto\goldenrod\underground\3.dat|2|remove|0)
    @npc.register(johto\goldenrod\underground\3.dat|3|remove|0)
    @npc.register(johto\goldenrod\main.dat|8|remove|0)
    @npc.register(johto\goldenrod\main.dat|9|remove|0)
    @npc.register(johto\mahogany\main.dat|2|remove|0)
    @npc.register(johto\mahogany\main.dat|3|position|12,0,8)
    @npc.register(johto\mahogany\shop.dat|4|position|1,0,2)
    @npc.unregister(johto\goldenrod\radiotower\1f.dat|0|remove|0)
    @npc.unregister(johto\goldenrod\radiotower\1f.dat|2|remove|0)
    @npc.unregister(johto\goldenrod\radiotower\1f.dat|3|remove|0)
    @npc.unregister(johto\goldenrod\radiotower\1f.dat|4|remove|0)
    @npc.unregister(johto\goldenrod\radiotower\1f.dat|5|position|15,0,1)
    @npc.unregister(johto\goldenrod\radiotower\2f.dat|3|remove|0)
    @npc.unregister(johto\goldenrod\radiotower\2f.dat|4|remove|0)
    @npc.unregister(johto\goldenrod\radiotower\2f.dat|5|remove|0)
    @npc.unregister(johto\goldenrod\radiotower\2f.dat|6|position|12,0,5)
    @npc.unregister(johto\goldenrod\radiotower\2f.dat|7|position|9,0,4)
    @npc.unregister(johto\goldenrod\radiotower\2f.dat|8|position|5,0,1)
    @npc.unregister(johto\goldenrod\radiotower\2f.dat|9|position|2,0,4)
    @npc.unregister(johto\goldenrod\main.dat|0|remove|0)
    @npc.unregister(johto\goldenrod\main.dat|1|remove|0)
    @npc.unregister(johto\goldenrod\main.dat|2|remove|0)
    @npc.unregister(johto\goldenrod\main.dat|3|remove|0)
    @npc.unregister(johto\goldenrod\main.dat|4|remove|0)
    @npc.unregister(johto\goldenrod\main.dat|5|remove|0)
    @npc.unregister(johto\goldenrod\main.dat|6|remove|0)
    @npc.unregister(johto\goldenrod\main.dat|7|remove|0)
    @npc.unregister(johto\goldenrod\main.dat|10|position|28,0,20)
    @npc.unregister(johto\goldenrod\main.dat|11|position|29,0,20)
    @npc.unregister(johto\goldenrod\main.dat|12|position|16,0,23)
    @npc.unregister(johto\goldenrod\main.dat|13|position|29,0,6)
    @npc.unregister(johto\goldenrod\main.dat|14|position|31,0,10)
    @register.remove(rocket_invasion_radio)
    @register.new(rocket_invasion_defeat)

    @npc.warp(0,13,0,0)
    @player.turnto(0)
    @npc.turn(0,2)
    @npc.move(0,2)
    @npc.turn(0,3)
    @npc.move(0,4)
    @npc.turn(0,2)
    @player.turnto(3)
    @npc.move(0,3)
    @npc.turn(0,1)
    @npc.move(0,1)

    @text.show(Director: <player.name>,~thank you!*Your courageous~actions have saved~Pokémon nationwide.*There used to be a~tower right here~in Goldenrod City.*But it was old and creaky.*So we replaced it with~our Radio Tower.*We dug up that~during construction.*I heard that all~sorts of Pokémon~lived in Goldenrod in the past.*Ah!*That reminds me...*I overheard Team~Rocket whispering.*Apparently, something~is going on~at the Tin Tower.*I have no idea~what is happening,*but you might look~into it.*Supposedly, the Kimono Girls~in Ecruteak City know~more about that.*OK, I better go to~my Office.)
    @register.new(kimono_tinwhirl_story)

    @npc.turn(0,3)
    @npc.move(0,1)
    @npc.turn(0,0)
    @npc.move(0,3)
    @player.turnto(0)
    @npc.turn(0,1)
    @npc.move(0,4)
    @npc.turn(0,0)
    @npc.move(0,2)
    @npc.warp(0,0,0,0)
:endif
:end